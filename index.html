<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Field Maintenance Portal</title>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2"></script>

<style>
body {font-family: Arial, sans-serif; margin:0; background:#f4f6f9; color:#222;}
header {text-align:center;padding:15px;background:#1e293b;color:white;}
header h2 {margin:5px;font-size:22px;}
header p {margin:0;font-size:14px;opacity:0.9;}
.container {padding:15px;}
.tabs {display:flex;gap:10px;margin-bottom:15px;flex-wrap:wrap;}
.tab-btn {flex:1;padding:12px;border:none;background:#e2e8f0;color:#111;font-size:15px;border-radius:10px;cursor:pointer;font-weight:bold;min-width:120px;}
.tab-btn.active {background:#2563eb;color:white;}
.tab-content {display:none;}
.tab-content.active {display:block;}
.refresh-btn {width:100%;padding:12px;border:none;background:#2563eb;color:white;font-size:15px;border-radius:10px;cursor:pointer;margin-bottom:15px;}
.logout-btn {width:100%;padding:12px;border:none;background:#ef4444;color:white;font-size:15px;border-radius:10px;cursor:pointer;margin-bottom:15px;font-weight:bold;}
.status {text-align:center;font-size:13px;margin-bottom:10px;font-weight:bold;}
.kpi-grid {display:grid;grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));gap:12px;margin-bottom:15px;}
.kpi-card {background:white;padding:15px;border-radius:12px;text-align:center;box-shadow:0px 2px 8px rgba(0,0,0,0.1);}
.kpi-card h3 {font-size:14px;margin:0;color:#555;}
.kpi-card p {font-size:22px;margin:8px 0 0;font-weight:bold;color:#2563eb;}
.table-area {margin-top:20px;background:white;padding:15px;border-radius:12px;overflow-x:auto;box-shadow:0px 2px 8px rgba(0,0,0,0.1);}
table {width:100%;border-collapse:collapse;font-size:13px;}
thead {background:#2563eb;color:white;}
th, td {padding:10px;border:1px solid #ddd;text-align:center;}
.login-box {max-width:420px;margin:40px auto;background:white;padding:25px;border-radius:15px;box-shadow:0px 2px 10px rgba(0,0,0,0.15);text-align:center;}
.login-box input {width:100%;margin-top:12px;padding:12px;font-size:15px;border-radius:10px;border:1px solid #ccc;}
.login-btn {width:100%;margin-top:15px;padding:12px;border:none;background:#2563eb;color:white;font-size:15px;border-radius:10px;cursor:pointer;font-weight:bold;}
.error-text {color:red;font-size:13px;margin-top:10px;font-weight:bold;}
</style>
</head>

<body>

<div id="loginScreen" class="login-box">
<h2>üîê Field Maintenance Portal</h2>
<p>Please login to continue</p>
<input type="text" id="loginUsername" placeholder="Enter Username"/>
<input type="password" id="loginPassword" placeholder="Enter Password"/>
<button class="login-btn" onclick="login()">Login</button>
<div id="loginMsg" class="error-text"></div>
</div>

<div id="appScreen" style="display:none;">
<header>
<h2>üìä Field Maintenance Portal</h2>
<p id="welcomeText">Welcome</p>
</header>
<div class="container">
<button class="logout-btn" onclick="logout()">üö™ Logout</button>
<div class="tabs" id="tabButtons"></div>
<div id="dashboardTab" class="tab-content active">
<h3>Dashboard Loaded</h3>
</div>
</div>
</div>

<script>
const ADMIN_USERNAME = "porag.das";
const ADMIN_PASSWORD = "gknayakg07";

let currentUser = null;
let currentRole = null;

function getUsers(){
let users = localStorage.getItem("users_list");
return users ? JSON.parse(users) : [];
}

function saveUsers(users){
localStorage.setItem("users_list", JSON.stringify(users));
}

// üîê Preload Default Executive User
(function preloadUser(){
let users = getUsers();
if(!users.find(u => u.username === "Rhittik.bt@maintenance.in")){
users.push({
username:"Rhittik.bt@maintenance.in",
password:"Rhittik@123",
role:"EXECUTIVE"
});
saveUsers(users);
}
})();

function login(){
let username=document.getElementById("loginUsername").value.trim();
let password=document.getElementById("loginPassword").value.trim();
let msg=document.getElementById("loginMsg");
msg.innerText="";

if(username===ADMIN_USERNAME && password===ADMIN_PASSWORD){
currentUser=username;
currentRole="ADMIN";
showApp();
return;
}

let users=getUsers();
let found=users.find(u=>u.username===username && u.password===password);

if(!found){
msg.innerText="‚ùå Access Denied (Invalid Username or Password)";
return;
}

currentUser=found.username;
currentRole=found.role;
showApp();
}

function logout(){
document.getElementById("appScreen").style.display="none";
document.getElementById("loginScreen").style.display="block";
document.getElementById("loginUsername").value="";
document.getElementById("loginPassword").value="";
}

function showApp(){
document.getElementById("loginScreen").style.display="none";
document.getElementById("appScreen").style.display="block";
document.getElementById("welcomeText").innerText=
"Welcome "+currentUser+" ("+currentRole+")";
}
</script>

</body>
</html>
